
<!-- This layout has been taken from http://globus.org/provision/ -->


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GETTING STARTED &mdash; teefaa 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="teefaa 0.1 documentation" href="index.html" />
    <link rel="next" title="Modules" href="modules.html" />
    <link rel="prev" title="INTRODUCTION" href="intro.html" />
 

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11111']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  </head>
  <body>

<div style="background-image:url('_static/header_bg.png');background-color: black; text-align: left; padding: 10px 10px 15px 35px">
<table>
  <tr>
    <td>
      <a href="index.html"><img src="http://futuregrid.github.com/doc/_static/fg-logo-grid-glow.png" border="0" alt="FutureGrid teefaa"/></a>
    </td>
    <td>
      <font size="5" color="white"><b><i>FutureGrid</i></b></font><br><br>
      <font size="10" color="white" face="Comic Sans MS"><b><i>teefaa</i></b></font>
    </td>
  </tr>
</table>

</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="INTRODUCTION"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Home</a>|&nbsp;</li>
        <li><a href="intro.html">Documentation </a>|&nbsp;</li>
        <li><a href="download.html">Download</a>|&nbsp;</li>
        <li><a href="support.html">Support</a>|&nbsp;</li>
        <li><a href="http://futuregrid.github.com/doc/">Dev</a>|&nbsp;</li>
        <li><a href="https://portal.futuregrid.org/">FutureGrid Home</a>|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">GETTING STARTED</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#provisioning">Provisioning</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">INTRODUCTION</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">Modules</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getstarted.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
<body style="background-image:url('_static/header_bg.png');background-color: grey;">
</body>

      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<h1>GETTING STARTED<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>The current version of FG Teefaa is installed on the FutureGrid
resource india.futureGrid.org. If you have your FutureGrid account,
you can get bare-metal nodes just like you get instance on Cloud. At
We use the resource manager torque to manage and schedule a
provisioning. Thus a resource can be easily reprovisioned with the
qsub command.</p>
<p>To illustrate the use of FG teefaa we have chosen a simple example
that provisions the OS Ubuntu-12.10 on two nodes of india for 5
hours.</p>
<p>To achieve this, you must first login to india.futuregrid.org</p>
<div class="highlight-python"><pre>ssh username@india.futuregrid.org</pre>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Next you need to define a FG teefa configuration file. We are
providing here a simple example and assume the file is located in teefaa_userrc</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Provide the FG project_id.</span>
<span class="n">PROJECT_ID</span><span class="o">=</span><span class="s">&quot;fg-296&quot;</span>

<span class="c"># Define the reservation period in hours.</span>
</pre></div>
</div>
<dl class="docutils">
<dt># Currently 168 (e.g. 7 days) is the maximum.</dt>
<dd><p class="first">HOURS=5</p>
<p># If you have your own costom image source, provide it next.
# If not, pick a image type from the choise and uncomment it.
#IMAGE_LIST=$HOME/teefaa/image.list
#IMAGE_NAME=your-custome on your image.list</p>
<p># The list of sample images includes.
IMAGE_NAME=ubuntu-12.10
#IMAGE_NAME=centos-6.3</p>
<p># specify your public key
SSH_PUBKEYS=&#8221;ssh-dss AAAAB....3NzaC.....1k/c..3MAGA...ACGEGAMlk <a class="reference external" href="mailto:you&#37;&#52;&#48;macbook">you<span>&#64;</span>macbook</a>&#8220;</p>
<p># Define a partitioning type.
PARTITION_TYPE=&#8221;mbr&#8221;
# GPT in Teefaa is only available for Ubuntu and Debian right now.
#PARTITION_TYPE=&#8221;gpt&#8221;</p>
<p class="last"># Define the disk device partitioning
disk=sda
sda1=(2 swap none)
sda2=(50 ext4 &#8220;/&#8221;)
sda3=(-1 xfs &#8220;/data&#8221;)</p>
</dd>
</dl>
</div>
<div class="section" id="provisioning">
<h2>Provisioning<a class="headerlink" href="#provisioning" title="Permalink to this headline">¶</a></h2>
<p>Next you need to define a provisioning script that gets scheduled with
the help of the queing system. For this example we name the file provision.pbs</p>
<div class="highlight-python"><pre>#!/bin/sh
#
# This is an example job script.
#
#PBS -N PROVISIONING
#PBS -l nodes=2:ppn=8
#PBS -q provision
#PBS -M username@example.edu
#PBS -m abe

module load torque

# Set the path to your teefaa_localrc
USERRC=~/jobs/teefaa_userrc

#####  PLEASE DO NOT CAHANGE THE FOLLOWING LINES  #####
sleep 10
# Pass your rc file to Teefaa Messenger via /tmp
pbsdsh cp $USERRC /tmp/userrc
sleep 10</pre>
</div>
<p>This file is used to submit the job.</p>
<div class="highlight-python"><pre>qsub provision.pbs</pre>
</div>
<p>The job will reserve two nodes, setup the provisioning configuration
and then reboot the machines according to the information from our
configuration file. During the execution of this job, the nodes will
boot with a customized netboot image, then install Ubuntu-12.10, and
then reboot. It will take about 10 to 15 minutes to finish the
installation.  Once the nodes are ready, they will show up on our FG
dispather queue which is installed on the node i132 on india.  You can
check the status of your activities as follows:</p>
<div class="highlight-python"><pre>qstat @i132
[sampleuser@i136 jobs]$ qstat @i132
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
28.i132                    i6_sampleuser       tfadmin         00:00:00 R dispatch
29.i132                    i51_sampleuser     tfadmin         00:00:00 R dispatch</pre>
</div>
<p>In this example, teh user <em>sampleuser</em> got i6 and i51. Now the user
can login to them as root.</p>
<div class="highlight-python"><pre>[sampleuser@i136 jobs]$ ssh root@i6
Welcome to Ubuntu 12.10 (GNU/Linux 3.5.0-21-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

  System information as of Wed Jan 16 23:27:09 EST 2013

  System load:  0.0               Processes:           111
  Usage of /:   2.7% of 49.22GB   Users logged in:     0
  Memory usage: 0%                IP address for eth0: 172.29.200.6
  Swap usage:   0%                IP address for eth1: 149.165.146.6

  Graph this data and manage this system at https://landscape.canonical.com/

Last login: Wed Jan 16 22:58:11 2013 from i136.idpm
root@i6:~#</pre>
</div>
<p>If you want to check how long you used your instances, you can check the time with this command.</p>
<div class="highlight-python"><pre>[sampleuser@i136 jobs]$ qstat -f 29.i132 | grep resources_used.walltime
  resources_used.walltime = 02:16:08</pre>
</div>
<p>This example shows the used-time of Job id 29 on Dispatcher
queue. Here it indicates that it spent 2 hours 16 minutes 8
seconds. Remember that the nodes are available for 5 hours.</p>
<p>In the next section, we explain how to create your custom images.</p>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="INTRODUCTION"
             >previous</a> |</li>
        <li><a href="index.html">Home</a>|&nbsp;</li>
        <li><a href="intro.html">Documentation </a>|&nbsp;</li>
        <li><a href="download.html">Download</a>|&nbsp;</li>
        <li><a href="support.html">Support</a>|&nbsp;</li>
        <li><a href="http://futuregrid.github.com/doc/">Dev</a>|&nbsp;</li>
        <li><a href="https://portal.futuregrid.org/">FutureGrid Home</a>|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Koji Tanaka, Gregor von Laszewski, Fugang Wang, Hyungro Lee, Javier Diaz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>